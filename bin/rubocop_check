#!/bin/bash

# Rubocop Check with Auto-fix
# Automatically fixes style issues but leaves them staged for manual commit

echo "ğŸ” Running Rubocop..."
if ! bin/rubocop -f github; then
  echo "âŒ Rubocop found issues. Running auto-fix..."
  if bin/rubocop -a; then
    echo "âœ… Rubocop auto-fixed issues successfully."
    
    # Check if there are any changes to stage
    if ! git diff --quiet; then
      echo "ğŸ“ Staging rubocop fixes for your commit..."
      git add .
      echo "âœ… Rubocop fixes staged and ready to be included in your commit!"
    else
      echo "â„¹ï¸ No changes to stage after rubocop auto-fix."
    fi
  else
    echo "âŒ Rubocop auto-fix failed. Manual intervention required."
    exit 1
  fi
fi
echo "âœ… Rubocop passed!" 